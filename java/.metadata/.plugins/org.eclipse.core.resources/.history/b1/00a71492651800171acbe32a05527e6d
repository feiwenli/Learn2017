/**
 * 生产者消费者问题
 * 生产窝头，消费窝头
 * @author Administrator
 *
 */
public class ProducerConsumer {
	Container cc = new Container();
	Producer p1 = new Producer(cc);
	Consumer c1 = new Consumer(cc);
}

class Container {
	Wotou [] wotou  = new Wotou[8];
	int num = 0;

	public synchronized void push(Wotou w){
		while(num == wotou.length){
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
		this.notify();
		wotou[num]=w;
		num++;
	}
	
	public synchronized Wotou pop(){
		while(num == wotou.length){
			try {
				this.wait();
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
		this.notify();
		num--;
		return wotou[num];
	}
}

class Wotou {
	int id ;
	Wotou (int id){
		this.id = id;
	}
}

class Producer implements Runnable {
	Container cc = null;
	Producer(Container c){
		cc = c;
	}
	
	public synchronized void run(){
		for (int i=0;i<20;i++){
			try{
				Thread.sleep((int)Math.random()*1000);
			}catch(InterruptedException e){
				e.printStackTrace();
			}
			Wotou w = new Wotou(i);
			cc.push(w);
		}
	}
}

class Consumer implements Runnable{
	Container cc = null;
	Consumer (Container c){
		cc = c;
	}
	
	public synchronized void run(){
		try{
			Thread.sleep((int)Math.random()*1000);
		}catch(InterruptedException e){
			e.printStackTrace();
		}
		for (int i=0;i<20;i++){
			Wotou w = new Wotou(i);
			cc.pop();
		}
	}
}